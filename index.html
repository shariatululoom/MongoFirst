<!DOCTYPE html>
<html lang="en" >

<head>
<script src="js/countries.js" ></script>
<script>
var check = function() {
//this is to validate password.... 
  if (document.getElementById('pass2').value ==
    document.getElementById('pass3').value) {
    document.getElementById('message').style.color = 'green';
    document.getElementById('message').innerHTML = 'password matched!';
  } else {
    document.getElementById('message').style.color = 'red';
    document.getElementById('message').innerHTML = 'pasword mismatch!';
  }
}
</script>

<meta charset="UTF-8">
<script src= "https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

 <script>
 function controlSignup()
 {
 const username = $("#email").val();
      const password = $("#pass2").val();
	  const firstName=$("#userFirst").val();
	  const lastName=$("#userLast").val();
	  const dob=$("#dob").val();
	  const country=$("#country").val();
	  const state=$("#state").val();
      $.post("http://localhost:3000/sendsignupreq", { username: username, password: password,firstName: firstName,lastName: lastName,dob: dob,country: country,state: state}, (data, status) => {
        if (status === 'success' && data!='' && data.Email!='ValidationError' )
		{
		console.log(data);
          alert('Successfully signed up!');
		  }
		  
        else
		{
		console.log(data.name);
          alert("Signup failure!");
		  }
      });
 }
function controlLogin()
{
/*var xhr = new XMLHttpRequest();
xhr.open("GET", "http://localhost:3000/getAllUser", false);
xhr.send();
var response = JSON.parse(xhr.responseText);
console.log(xhr.status);
console.log(xhr.statusText)
console.log(xhr.responseText);
console.log('modified:-  '+response[0].name);
*/
 
  
    
      const username = $("#user").val();
      const password = $("#pass1").val();
      $.post("http://localhost:3000/sendloginreq", { username: username, password: password }, (data, status) => {
        if (status === 'success' && data!='' )
		{
		
		
		console.log(data);
          alert('Welcome '+data[0].FirstName);
		  }
		  
        else
		{
          alert("Login denied");
		  }
      });
    
  
}

</script>

  <meta charset="UTF-8">
  <title>SKMS Enterprise</title>
  
  
  <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Open+Sans:600'>

      <link rel="stylesheet" href="./css/style.css">
	  <link rel="stylesheet" href="./css/country-region.css">

</head>

<body background="https://www.dotfoods.com/images/cloud_background.jpsddsg">

  <div class="login-wrap">
	<div class="login-html">
		<input id="tab-1" type="radio" name="tab" class="sign-in" checked><label for="tab-1" class="tab">Sign In</label>
		<input id="tab-2" type="radio" name="tab" class="sign-up"><label for="tab-2" class="tab">Sign Up</label>
		<div class="login-form">
			<div class="sign-in-htm">
				<div class="group">
					<label  class="label">Email</label>
					<input id="user" type="text" class="input">
				</div>
				<div class="group">
					<label  class="label">Password</label>
					<input id="pass1" type="password" class="input" data-type="password">
				</div>
				<div class="group">
				
					<input id="check" type="checkbox"   >
					
					<label >Keep me Signed in</label>
				</div>
				<div class="group">
					<input type="button" class="button" onclick="controlLogin()" value="Sign In">
				</div>
				<div class="hr"></div>
				<div class="foot-lnk">
					<a href="#forgot">Forgot Password?</a>
				</div>
			</div>
			<div class="sign-up-htm" autofl>
				<div class="group">
					<label  class="label">First Name </label>
					<input id="userFirst" type="text" class="input">
				</div>
				<div class="group">
					<label  class="label">Last Name</label>
					<input id="userLast" type="text" class="input">
				</div>
				<div class="group">
					<label  class="label">DOB</label>
					<input id="dob" type="date" name="bday" class="input">
				</div>
				<div class="group">
					<label  class="label">Email Address</label>
					<input id="email" type="text" class="input">
				</div>
				<div class="group">
					<label class="label">Country</label>
					<select id="country" name ="country" class="input"></select>
					
				</div>
				<div class="group">
					<label class="label">State</label>
					<select name ="state" id ="state" class="input"></select>
				</div>
				<div class="group">
					<label class="label">Password</label>
					<input id="pass2" type="password" class="input" data-type="password">
				</div>
				<div class="group">
					<label class="label">Confirm Password</label>
					<input id="pass3" type="password" class="input" onkeyup="check()" data-type="password">
					<span id='message'></span>
				</div>
		
				
				<div class="group">
					<input type="button" class="button" value="Sign Up" onclick="controlSignup()">
				</div>
				<div class="hr"></div>
				<div class="foot-lnk">
					<label for="tab-1">Already Member?</a>
				</div>
			</div>
		</div>
	</div>
</div>
  
  

</body>
<script language="javascript">
	populateCountries("country", "state"); // first parameter is id of country drop-down and second parameter is id of state drop-down
	populateCountries("country2");
	populateCountries("country2");
</script>
</html>
